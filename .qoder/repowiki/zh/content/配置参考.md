# 配置参考

<cite>
**本文档中引用的文件**
- [application.yml](file://spring-ai-alibaba-audio-example/dashscope-audio/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-bailian-example/src/main/resources/application.yml)
- [application-agent.yml](file://spring-ai-alibaba-bailian-example/src/main/resources/application-agent.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/ark-chat/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/azure-openai-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/dashscope-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/deepseek-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/moonshot-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/ollama-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/openai-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/qwq-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/vllm-chat/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-helloworld/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-image-example/dashscope-image/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-image-example/openai-image/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-mem0-example/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-more-platform-and-model-example/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-nacos-prompt-example/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-structured-example/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-studio-example/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-tool-calling-example/src/main/resources/application.yml)
- [application-dev.yml](file://spring-ai-alibaba-playground/src/main/resources/application-dev.yml)
- [application-prod.yml](file://spring-ai-alibaba-playground/src/main/resources/application-prod.yml)
- [mcp-config.yml](file://spring-ai-alibaba-playground/src/main/resources/mcp-config.yml)
</cite>

## 目录
1. [简介](#简介)
2. [配置文件结构与语法](#配置文件结构与语法)
3. [AI模型提供商配置](#ai模型提供商配置)
4. [RAG向量数据库连接配置](#rag向量数据库连接配置)
5. [MCP服务器端点配置](#mcp服务器端点配置)
6. [可观测性监控后端设置](#可观测性监控后端设置)
7. [分环境配置管理](#分环境配置管理)
8. [敏感信息保护](#敏感信息保护)
9. [高级配置与最佳实践](#高级配置与最佳实践)

## 简介
本文档旨在为开发者提供一份全面的配置参考指南，涵盖项目中所有示例的配置模式。通过系统性地整理和解释`application.yml`文件中的关键配置项，帮助开发者正确配置和定制各个AI功能模块。文档内容包括AI模型提供商的API密钥、基础URL、模型名称等核心参数，以及RAG、MCP和可观测性等高级功能的特定配置。

**Section sources**
- [application.yml](file://spring-ai-alibaba-audio-example/dashscope-audio/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-bailian-example/src/main/resources/application.yml)

## 配置文件结构与语法
Spring Boot应用的标准配置文件采用YAML格式，具有清晰的层次结构。配置项以冒号分隔层级，通过缩进表示嵌套关系。例如，`spring.ai.dashscope.api-key`表示在`spring`根节点下，依次嵌套`ai`、`dashscope`，最终的配置项为`api-key`。

YAML文件支持变量引用，使用`${VARIABLE_NAME}`语法从环境变量中读取值，实现敏感信息的外部化管理。同时支持默认值设置，如`${VAR_NAME:default_value}`，当环境变量未定义时使用默认值。

**Section sources**
- [application.yml](file://spring-ai-alibaba-audio-example/dashscope-audio/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-chat-example/ark-chat/application.yml)

## AI模型提供商配置
### 通义千问（DashScope）
```yaml
spring:
  ai:
    dashscope:
      api-key: ${AI_DASHSCOPE_API_KEY}
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-helloworld/src/main/resources/application.yml)

### OpenAI 兼容接口
```yaml
spring:
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      base-url: https://api.openai-hk.com
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-chat-example/openai-chat/src/main/resources/application.yml)

### Azure OpenAI
```yaml
spring:
  ai:
    azure:
      openai:
        api-key: ${AI_AZURE_OPENAI_API_KEY}
        endpoint: ${AI_AZURE_OPENAI_ENDPOINT}
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-chat-example/azure-openai-chat/src/main/resources/application.yml)

### DeepSeek
```yaml
spring:
  ai:
    deepseek:
      api-key: ${AI_DEEPSEEK_API_KEY}
      base-url: "https://api.deepseek.com"
      chat:
        options:
          model: deepseek-chat
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-chat-example/deepseek-chat/src/main/resources/application.yml)

### Moonshot
```yaml
spring:
  ai:
    moonshot:
      api-key: ${MOONSHOT_API_KEY}
      base-url: "https://api.moonshot.cn"
      chat:
        options:
          model: moonshot-v1-8k
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-chat-example/moonshot-chat/src/main/resources/application.yml)

### Ollama
```yaml
spring:
  ai:
    ollama:
      base-url: http://localhost:11434
      chat:
        model: llama3
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-chat-example/ollama-chat/src/main/resources/application.yml)

### QwQ
```yaml
spring:
  ai:
    dashscope:
      api-key: ${AI_DASHSCOPE_API_KEY}
      chat:
        options:
          model: qwq-plus
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-chat-example/qwq-chat/src/main/resources/application.yml)

### vLLM
```yaml
spring:
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      base-url: https://api.openai-hk.com
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-chat-example/vllm-chat/src/main/resources/application.yml)

## RAG向量数据库连接配置
Mem0示例展示了复杂的向量数据库和图数据库配置：

```yaml
spring:
  ai:
    alibaba:
      mem0:
        server:
          vector-store:
            provider: pgvector
            config:
              host: ${POSTGRES_HOST:postgres}
              port: ${POSTGRES_PORT:5432}
              dbname: ${POSTGRES_DB:postgres}
              user: ${POSTGRES_USER:postgres}
              password: ${POSTGRES_PASSWORD:postgres}
              collection-name: ${POSTGRES_COLLECTION_NAME:memories}
          graph-store:
            provider: neo4j
            config:
              url: ${NEO4J_URI:bolt://neo4j:7687}
              username: ${NEO4J_USERNAME:neo4j}
              password: ${NEO4J_PASSWORD:mem0graph}
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-mem0-example/src/main/resources/application.yml)

## MCP服务器端点配置
Playground项目中的MCP配置文件定义了服务器端点：

```yaml
# MCP配置文件
mcp:
  server:
    endpoints:
      - id: file-server
        url: http://localhost:8080/mcp/file
      - id: github
        url: http://localhost:8080/mcp/github
```
**Section sources**
- [mcp-config.yml](file://spring-ai-alibaba-playground/src/main/resources/mcp-config.yml)

## 可观测性监控后端设置
Nacos提示词示例中包含了Nacos配置中心的连接设置：

```yaml
spring:
  nacos:
    username: nacos
    password: nacos
  ai:
    nacos:
      prompt:
        template:
          enabled: true
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-nacos-prompt-example/src/main/resources/application.yml)

## 分环境配置管理
项目采用Spring Profiles机制实现分环境配置管理。通过`application-{profile}.yml`文件区分不同环境，如：

- `application-dev.yml`: 开发环境配置
- `application-prod.yml`: 生产环境配置

在主配置文件中通过`spring.profiles.active`指定激活的配置文件：
```yaml
spring:
  profiles:
    active: agent
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-bailian-example/src/main/resources/application.yml)
- [application-dev.yml](file://spring-ai-alibaba-playground/src/main/resources/application-dev.yml)
- [application-prod.yml](file://spring-ai-alibaba-playground/src/main/resources/application-prod.yml)

## 敏感信息保护
所有敏感信息（如API密钥、密码等）均通过环境变量注入，避免硬编码在配置文件中。采用`${VARIABLE_NAME}`格式引用环境变量：

```yaml
api-key: ${AI_DASHSCOPE_API_KEY}
password: ${POSTGRES_PASSWORD:postgres}
```

推荐使用`.env`文件或CI/CD系统的环境变量管理功能来设置这些敏感值，并将包含敏感信息的文件添加到`.gitignore`中。

**Section sources**
- [application.yml](file://spring-ai-alibaba-audio-example/dashscope-audio/src/main/resources/application.yml)
- [application.yml](file://spring-ai-alibaba-mem0-example/src/main/resources/application.yml)

## 高级配置与最佳实践
### 多模型配置
more-platform-and-model示例展示了同时配置多个AI提供商的能力：

```yaml
spring:
  ai:
    dashscope:
      chat:
        api-key: ${AI_DASHSCOPE_API_KEY}
    ollama:
      base-url: http://localhost:11434
      chat:
        model: deepseek-r1:8b
    openai:
      api-key: ${OPENAI_API_KEY}
      base-url: https://api.openai-hk.com
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-more-platform-and-model-example/src/main/resources/application.yml)

### 工具调用配置
tool-calling示例展示了第三方服务的集成配置：

```yaml
spring:
  ai:
    alibaba:
      toolcalling:
        baidu:
          translate:
            enabled: true
            app-id: ${BAIDU_TRANSLATE_APP_ID}
            secret-key: ${BAIDU_TRANSLATE_SECRET_KEY}
          map:
            enabled: true
            apiKey: ${BAIDU_MAP_API_KEY}
        weather:
          enabled: true
          api-key: ${WEATHER_API_KEY}
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-tool-calling-example/src/main/resources/application.yml)

### 结构化输出配置
structured-example示例展示了JSON格式响应的配置：

```yaml
spring:
  ai:
    dashscope:
      chat:
        response-format: json
```
**Section sources**
- [application.yml](file://spring-ai-alibaba-structured-example/src/main/resources/application.yml)